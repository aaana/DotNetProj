@{
    ViewBag.Title = "PersonalPageFollows";
    Layout = "~/Views/Shared/WeikePersonalPageLayout.cshtml";
}

<ol class="breadcrumb personalPageNav" data-spy="affix" data-offset-top="230"  id=@ViewBag.personalInfo["id"]>
    @if (ViewBag.isCurrentUser)
    {
        <li><a href="../PersonalPage/PersonalPageWeike?userId=@ViewBag.personalInfo["id"]">微课 @ViewBag.personalInfo["weikeCount"]</a></li>
        <li><a href="../PersonalPage/PersonalPageLikes?userId=@ViewBag.personalInfo["id"]">赞过的微课 @ViewBag.personalInfo["weikeCount"]</a></li>
        <li class="active">关注的人 @ViewBag.personalInfo["weikeCount"]</li>
    }
    else
    {
        <li><a href="../PersonalPage/PersonalPageWeike?userId=@ViewBag.personalInfo["id"]">微课 @ViewBag.personalInfo["weikeCount"]</a></li>
        <li><a href="../PersonalPage/PersonalPageLikes?userId=@ViewBag.personalInfo["id"]">赞过的微课 @ViewBag.personalInfo["likeCount"]</a></li>
        <li class="active">关注的人 @ViewBag.personalInfo["followCount"]</li>
    }   

    <span></span>
    @if (ViewBag.isCurrentUser)
    {
        <button class="btn btn-primary" onclick="window.location.href = '../Publish/Publish?from=PersonalPage/PersonalPageWeike'">+<span>发布微课</span></button>
    }
    else if (ViewBag.hasFollow)
    {
        <button class="btn btn-primary navFollowBtn" onclick="unfollow(this)">已关注</button>
    }
    else
    {
        <button class="btn btn-primary navFollowBtn" onclick="follow(this)">+ 关注</button>
    }        
</ol>

<div class="personalPageContent">
    @{
        var id = 100;
    }
    <div class="personalPageContentItem followList">
        @foreach (var item in ViewBag.favoriteWeikeData)
        {
            <div class="media"  onclick="gotoPersonalPage(@item.weike.weike_id)">
                <div class="media-left">
                    <img src="../resource/img/portrait.jpg" class="img-circle"  onclick="gotoPersonalPage(@item.weike.user_id)">
                </div>
                <div class="media-body">
                    <div>
                        <div>
                            <span><b>@item.weike.weike_id</b></span>
                            <span>@item.weike.weike_id</span>
                        </div>
                        <div></div>
                        @if (item.weike.weike_id == "false")
                        {
                            <div id=@item.weike.weike_id>
                                @if (item.weike.weike_id == "true")
                                {
                                    <button class="btn btn-primary" onclick="unfollow(this)">已关注</button>
                                }
                                else
                                {
                                    <button class="btn btn-primary" onclick="follow(this)">+ 关注</button>
                                }
                            </div>
                        }
                    </div>
                </div>
            </div>
        }

    </div>

</div>


<script type="text/javascript" src="../Scripts/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="../Scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="../Scripts/custom/helper.js"></script>
